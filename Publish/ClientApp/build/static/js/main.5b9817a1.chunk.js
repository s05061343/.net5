(this.webpackJsonpwebui=this.webpackJsonpwebui||[]).push([[0],{100:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n(11),s=n(24),c=n(7),l=n(33),u=n(15),m=n(50),d=n(44),p=n(14),f=n.n(p),g=(n(30),n(51),n(31)),h=n.n(g),v=h.a.create({baseURL:"/"});var b=h.a.create({baseURL:"https://tomz-shorten-url.herokuapp.com"}),E={post:function(){return function(e,t){var n,a=t(),r=new FormData;r.append("userId",a.loginUser.user.userId),r.append("password",a.loginUser.user.password),(n=r,v.post("/auth/default/login",n)).then((function(t){console.log(t);var n=JSON.parse(t.request.response);console.log(n),200===t.status&&(sessionStorage.setItem("authToken",JSON.stringify(n.authToken)),p.store.addNotification({message:"\u767b\u5165\u6210\u529f",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e({type:"POST_LOGIN",user:{authToken:n.authToken,userId:n.userId,password:"",isAuth:!!n.authToken}}))})).catch((function(e){console.log(e),p.store.addNotification({title:"\u767b\u5165\u5931\u6557",message:"\u5e33\u865f\u6216\u5bc6\u78bc\u8f38\u5165\u932f\u8aa4\uff0c\u8acb\u91cd\u65b0\u78ba\u8a8d\u5f8c\u91cd\u8a66",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}))}},setUserId:function(e){return function(t,n){var a=n();t({type:"SET_USERID",user:{authToken:"",userId:e,password:a.loginUser.user.password,isAuth:!1}})}},setPassword:function(e){return function(t,n){t({type:"SET_PASSWORD",user:{authToken:"",userId:n().loginUser.user.userId,password:e,isAuth:!1}})}},logout:function(){return function(e,t){sessionStorage.removeItem("authToken"),document.cookie="AuthToken=; path=/;",e({type:"USER_LOGOUT",user:{authToken:"",userId:"",password:"",isAuth:!1}})}}},O={post:function(){return function(e,t){var n,a=t(),r={url:a.shortemer.value.originalUrl};(n=r,b.post("/urlshortemer/default/shorten",n)).then((function(t){console.log(t);var n=JSON.parse(t.request.response);console.log(n),200===t.status&&(p.store.addNotification({message:"\u7e2e\u7db2\u5740\u5b8c\u6210",type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e({type:"POST",value:{originalUrl:a.shortemer.value.originalUrl,translationUrl:n.data}}))})).catch((function(e){p.store.addNotification({title:"\u7522\u751f\u5931\u6557",message:"\u7e2e\u7db2\u5740\u7522\u751f\u5931\u6557\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\u3002",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}))}},setUrl:function(e){return function(t,n){n();t({type:"SET_URL",value:{originalUrl:e,translationUrl:""}})}}},_={loginUser:function(e,t){if(void 0===e)return{user:{authToken:"",userId:"",password:"",isAuth:!1}};switch(t.type){case"POST_LOGIN":case"SET_USERID":case"SET_PASSWORD":case"USER_LOGOUT":case"ERROR_MESSAGE":return{user:t.user};default:return e}},shortemer:function(e,t){if(void 0===e)return{value:{originalUrl:"",translationUrl:""}};switch(t.type){case"POST":case"SET_URL":return{value:t.value};default:return e}}},w=n(52),S=n.n(w);var N=n(21),y=n(10),U=n(17),T=n(18),I=n(20),k=n(19),j=n(114),R=n(115),A=n(116),L=n(117),P=(n(100),function(e){Object(I.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(T.a)(n,[{key:"render",value:function(){return a.createElement(j.a,{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-custom","aria-label":"Main navigation"},a.createElement("div",{className:"container-fluid"},a.createElement(R.a,{onClick:this.toggle,className:"navbar-toggler p-0 border-0","data-bs-toggle":"offcanvas","aria-label":"Toggle navigation"},a.createElement("span",{className:"navbar-toggler-icon"})),a.createElement(A.a,{tag:N.b,to:"/shortenurl",className:"navbar-brand"},"Tomz WebSide"),a.createElement(L.a,{className:"navbar-collapse offcanvas-collapse",isOpen:this.state.isOpen},a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0 s-menu"}))))}}]),n}(a.PureComponent)),D=Object(i.c)((function(e){return e.loginUser}),E)(P),x=function(e){Object(I.a)(n,e);var t=Object(k.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement(D,null),a.createElement("div",{className:"nav-scroller bg-white shadow-sm"},a.createElement("nav",{className:"nav nav-underline","aria-label":"Secondary navigation"})),a.createElement("div",{className:"container"},this.props.children))}}]),n}(a.PureComponent),C=(n(108),function(e){Object(I.a)(n,e);var t=Object(k.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement("div",{className:"text-center"},a.createElement("main",{className:"form-signin"},a.createElement("form",null,a.createElement("img",{className:"mb-4",src:"/logo_transparent.png",alt:"",width:"240",height:"240"}),a.createElement("h1",{className:"h3 mb-3 fw-normal"},"\u7e2e\u7db2\u5740"),a.createElement("div",{className:"form-floating"},a.createElement("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",onChange:function(t){e.props.setUrl(t.target.value)}}),a.createElement("label",{htmlFor:"floatingInput"},"\u5728\u9019\u88e1\u8f38\u5165\u4f60\u7684\u7db2\u5740:")),a.createElement("button",{className:"w-100 btn btn-lg btn-primary",type:"button",onClick:function(){e.props.post()}},"\u7522\u751f"),a.createElement("p",{className:"mt-5 mb-3 text-muted"},"\xa9 2017\u20132021"),a.createElement("p",{className:"mt-5 mb-3 text-muted"},this.props.value.translationUrl)))))}}]),n}(a.PureComponent)),W=Object(i.c)((function(e){return e.shortemer}),O)(C),G=(n(109),n(110),function(){return r.a.createElement("div",null,r.a.createElement(f.a,null),r.a.createElement(N.a,null,r.a.createElement(x,null,r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/shortenurl",component:W}),r.a.createElement(y.a,{to:"/shortenurl"})))))}),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(111);var X=document.getElementsByTagName("base")[0].getAttribute("href"),B=Object(c.a)({basename:X}),q=function(e,t){var n=[m.a,Object(d.a)(e),S.a],a=Object(u.c)(Object(l.a)(Object(l.a)({},_),{},{router:Object(s.b)(e)})),r=[],o="undefined"===typeof window?null:window;return o&&o.__REDUX_DEVTOOLS_EXTENSION__&&r.push(o.__REDUX_DEVTOOLS_EXTENSION__()),Object(u.e)(a,t,u.d.apply(void 0,[u.a.apply(void 0,n)].concat(r)))}(B);o.render(a.createElement(i.a,{store:q},a.createElement(s.a,{history:B},a.createElement(G,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");J?function(e){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):F(e)}))}}()},54:function(e,t,n){e.exports=n(112)}},[[54,1,2]]]);
//# sourceMappingURL=main.5b9817a1.chunk.js.map